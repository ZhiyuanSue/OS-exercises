### 题目1

1、请简要描述物理内存分配算法"伙伴系统"的工作原理，即它是如何维护物理内存的分配状态，以及物理内存分配和物理内存释放操作过程。

2、假定物理内存的初始状态是一个1MB的空闲物理内存块，采用伙伴系统进行物理内存分配和释放，请给出下面分配和释放序列过程中的物理内存分配状态：

- 进程A请求200KB的物理内存空间
- 进程B请求100KB的物理内存空间
- 进程C请求50KB的物理内存空间
- 进程D请求140KB的物理内存空间
- 进程B释放已占用额物理内存空间
- 进程A释放已占用额物理内存空间
- 进程E请求110KB的物理内存空间
- 进程C释放已占用的物理内存空间
- 进程E释放已占用的物理内存空间
- 进程D释放已占用的物理内存空间

### 题目2

在一个只有一级页表的请求页式存储管理系统中，假定页表内容如下表

| 页号 | Page frame号 | 有效位 |
| ---- | ------------ | ------ |
| 0    | 123H         | 1      |
| 1    | N/A          | 0      |
| 2    | 254H         | 1      |

页面大小为4KB，一次内存的访问时间是100ns，一次TLB访问时间是10ns，处理一次缺页的平均时间为10^7ns（包含了更新TLB和页表的时间），进程的驻留集大小固定为2，采用局部页面置换算法中的LRU置换算法。TLB初始为空，地址转换时先访问TLB，若TLB未命中，再访问页表（忽略访问页表后的TLB更新时间）。有效位为0的页面不在内存中，会触发缺页中断，缺页中断处理之后会返回产生缺页中断的指令处重新执行。

依次访问2362H，1565H，25A5H三个虚拟地址，各需要多少时间？

### **题目3**

对于虚拟内存的内存分配，有各种不同的指标来评估一个内存分配器的优劣，比如：

https://github.com/emeryberger/Malloc-Implementations/blob/master/allocators/ptmalloc/ptmalloc3/t-test1.c 

这是一个ptmalloc内存分配器的简单性能测试基准程序，同样的，其他内存分配器，如tcmalloc，jemalloc等现有内存分配器均有自己的基准测试。选择以下**其中一个**习题进行回答：

1.参考以上的样例，根据你选择的开发和运行环境，考虑内存分配的大小分布等因素，设计一个简单的内核态的内存分配器基准测试，并简单测试你选择的ucore或者rcore中的内存分配器的性能，对于你测试的结果加以说明（相应的代码应该在ch4分支，另外，你可能需要考虑到ucore/rcore中的内存分配器在边界条件等情况下不够鲁棒等问题，如有需要请相应的完善其代码）

2.前一次课后练习中，曾经建议同学们阅读slab分配器的设计，参考课程内容，slab分配器原理，或者其他内核内存分配器的优点，给ucore/rcore设计一个简单的内核态的内存分配器，以取代现有的简易分配器。简要说明你的设计，相比于现有ucore/rcore中分配器的优点，如果有精力，可以尝试给出ucore/rcore中的代码实现并给出链接。

### 题目4

（调查，可选）

目前已经布置了6次课后练习，如果你对课后练习有什么建议或者意见，可以在此描述。例如：

- 课后练习是否占用太多时间？
- 课后练习是否难度过高？
- 你希望课后练习更多的跟课程内容相关以便于巩固课上的内容，还是更多的给出操作系统扩展内容以便于拓展知识面？
- 你希望课后练习的内容以类似考题的形式给出，还是上机实操的形式，或者资料阅读等其他形式？
- ……

如果有各种建议意见，都可以在此描述